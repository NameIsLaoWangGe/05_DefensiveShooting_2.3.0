{
  "code": "import { lwg } from \"../Lwg_Template/lwg\";\r\nimport UIMain_Enemy from \"./UIMain_Enemy\";\r\nimport UIMain_Protagonist from \"./UIMain_Protagonist\";\r\nimport UIMain_Bullet from \"./UIMain_Bullet\";\r\nexport default class UIMain extends lwg.Admin.Scene {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.timer = 0;\r\n    }\r\n    selfVars() {\r\n    }\r\n    lwgInit() {\r\n        this.timer = 0;\r\n        this.bulletNum = 0;\r\n        this.self['Protagonist'].addComponent(UIMain_Protagonist);\r\n        lwg.Global._gameStart = true;\r\n        this.self['GuideLine'].alpha = 0;\r\n        this.touchColor = null;\r\n    }\r\n    createEnemy() {\r\n        let enemy;\r\n        enemy = Laya.Pool.getItemByCreateFun('enemy', this.Enemy.create, this.Enemy);\r\n        this.self['EnemyParent'].addChild(enemy);\r\n        let randX = enemy.width / 2 + (Laya.stage.width - enemy.width / 2 * 2) * Math.random();\r\n        enemy.addComponent(UIMain_Enemy);\r\n        enemy.pos(randX, 0);\r\n        enemy.zOrder = 0;\r\n        this.bulletNum++;\r\n        return enemy;\r\n    }\r\n    createBullet(x, y) {\r\n        let bullet;\r\n        bullet = Laya.Pool.getItemByCreateFun('bullet', this.Bullet.create, this.Bullet);\r\n        this.self['BulletParent'].addChild(bullet);\r\n        bullet.pos(x, y);\r\n        bullet.zOrder = 0;\r\n        bullet.addComponent(UIMain_Bullet);\r\n        let pic = bullet.getChildByName('Pic');\r\n        switch (this.launchType) {\r\n            case lwg.Enum.bulletType.yellow:\r\n                pic.skin = lwg.Enum.bulletSkin.yellow;\r\n                bullet['UIMain_Bullet'].bulletType = lwg.Enum.bulletType.yellow;\r\n                break;\r\n            case lwg.Enum.bulletType.bule:\r\n                pic.skin = lwg.Enum.bulletSkin.bule;\r\n                bullet['UIMain_Bullet'].bulletType = lwg.Enum.bulletType.bule;\r\n                break;\r\n            case lwg.Enum.bulletType.green:\r\n                pic.skin = lwg.Enum.bulletSkin.green;\r\n                bullet['UIMain_Bullet'].bulletType = lwg.Enum.bulletType.green;\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        return bullet;\r\n    }\r\n    btnOnClick() {\r\n        lwg.Click.on(lwg.Click.ClickType.noEffect, null, this.self['BtnYellow'], this, this.clickDwon, null, null, null);\r\n        lwg.Click.on(lwg.Click.ClickType.noEffect, null, this.self['BtnBlue'], this, this.clickDwon, null, null, null);\r\n        lwg.Click.on(lwg.Click.ClickType.noEffect, null, this.self['BtnGreen'], this, this.clickDwon, null, null, null);\r\n    }\r\n    clickDwon(e) {\r\n        this.touchColor = e.currentTarget;\r\n        switch (this.touchColor.name) {\r\n            case 'BtnYellow':\r\n                this.launchType = lwg.Enum.bulletType.yellow;\r\n                this.self['BtnYellow'].scale(1.1, 1.1);\r\n                this.self['BtnBlue'].scale(1, 1);\r\n                this.self['BtnGreen'].scale(1, 1);\r\n                this.self['GuideLine'].x = this.self['BtnYellow'].x;\r\n                this.self['GuideLine'].y = this.self['BtnYellow'].y;\r\n                this.self['GuideLine'].alpha = 1;\r\n                break;\r\n            case 'BtnBlue':\r\n                this.launchType = lwg.Enum.bulletType.bule;\r\n                this.self['BtnYellow'].scale(1, 1);\r\n                this.self['BtnBlue'].scale(1.1, 1.1);\r\n                this.self['BtnGreen'].scale(1, 1);\r\n                this.self['GuideLine'].x = this.self['BtnBlue'].x;\r\n                this.self['GuideLine'].y = this.self['BtnBlue'].y;\r\n                this.self['GuideLine'].alpha = 1;\r\n                break;\r\n            case 'BtnGreen':\r\n                this.launchType = lwg.Enum.bulletType.green;\r\n                this.self['BtnYellow'].scale(1, 1);\r\n                this.self['BtnBlue'].scale(1, 1);\r\n                this.self['BtnGreen'].scale(1.1, 1.1);\r\n                this.self['GuideLine'].x = this.self['BtnGreen'].x;\r\n                this.self['GuideLine'].y = this.self['BtnGreen'].y;\r\n                this.self['GuideLine'].alpha = 1;\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n    onStageMouseMove(e) {\r\n        if (this.touchColor !== null) {\r\n            let x = e.stageX;\r\n            let y = e.stageY;\r\n            let point = new Laya.Point(x, y);\r\n            let len = point.distance(this.touchColor.x, this.touchColor.y);\r\n            let line = this.self['GuideLine'].getChildByName('Line');\r\n            line.height = len;\r\n            let movePoint = new Laya.Point(x - this.touchColor.x, y - this.touchColor.y);\r\n        }\r\n    }\r\n    onStageMouseUp(e) {\r\n        let x = e.stageX;\r\n        let y = e.stageY;\r\n        let point = new Laya.Point(x, y);\r\n        if (this.touchColor !== null) {\r\n            let distance = point.distance(this.touchColor.x, this.touchColor.y);\r\n            if (distance > 100) {\r\n                let bullet = this.createBullet(this.touchColor.x, this.touchColor.y);\r\n                let movePoint = new Laya.Point(x - this.touchColor.x, y - this.touchColor.y);\r\n                movePoint.normalize();\r\n                bullet.getComponent(UIMain_Bullet).movePoint = movePoint;\r\n                console.log(bullet.getComponent(UIMain_Bullet).movePoint);\r\n            }\r\n        }\r\n        this.self['GuideLine'].alpha = 0;\r\n        this.touchColor = null;\r\n    }\r\n    lwgOnUpdate() {\r\n        if (lwg.Global._gameStart) {\r\n            this.timer++;\r\n            if (this.timer % 180 === 0) {\r\n                this.createEnemy();\r\n            }\r\n        }\r\n    }\r\n}\r\n",
  "references": [
    "F:/Work/Game/05_DefensiveShooting_2.3.0/project/DefensiveShooting-2.3.0/src/script/Lwg_Template/lwg.ts",
    "F:/Work/Game/05_DefensiveShooting_2.3.0/project/DefensiveShooting-2.3.0/src/TJ/RecordManager.ts",
    "F:/Work/Game/05_DefensiveShooting_2.3.0/project/DefensiveShooting-2.3.0/src/TJ/Admanager.ts",
    "F:/Work/Game/05_DefensiveShooting_2.3.0/project/DefensiveShooting-2.3.0/src/script/Game/UIMain_Enemy.ts",
    "F:/Work/Game/05_DefensiveShooting_2.3.0/project/DefensiveShooting-2.3.0/src/script/Game/UIMain_Protagonist.ts",
    "F:/Work/Game/05_DefensiveShooting_2.3.0/project/DefensiveShooting-2.3.0/src/script/Game/UIMain_Bullet.ts"
  ]
}
