{
  "code": "import { lwg, Admin } from \"../Lwg_Template/lwg\";\r\nimport { GEnum } from \"../Lwg_Template/Global\";\r\nexport default class UIMain_Enemy extends lwg.Admin.Object {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.stoneTime = false;\r\n        this.moveDir = GEnum.enemyMoveDir.down;\r\n    }\r\n    selfNode() {\r\n    }\r\n    lwgOnEnable() {\r\n        this.moveDir = GEnum.enemyMoveDir.down;\r\n        this.enemyState = GEnum.enemyState.move;\r\n        let num = this.self.getChildByName('Num');\r\n        num.text = (Math.floor(Math.random() * 3) + 1).toString();\r\n        let pic = this.self.getChildByName('Pic');\r\n        let rand = Math.floor(Math.random() * 3);\r\n        switch (rand) {\r\n            case 0:\r\n                pic.skin = GEnum.enemySkin.yellow;\r\n                this.enemyType = GEnum.enemyType.yellow;\r\n                break;\r\n            case 1:\r\n                pic.skin = GEnum.enemySkin.bule;\r\n                this.enemyType = GEnum.enemyType.bule;\r\n                break;\r\n            case 2:\r\n                pic.skin = GEnum.enemySkin.green;\r\n                this.enemyType = GEnum.enemyType.green;\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n    onTriggerEnter(other, self) {\r\n        switch (other.label) {\r\n            case 'bullet':\r\n                this.enemyAndEnemy(other, self);\r\n                break;\r\n            case 'stone':\r\n                this.enemyAndStone(other, self);\r\n                break;\r\n            case 'enemy':\r\n                this.enemyAndEnemy(other, self);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n    enemyAndEnemy(other, self) {\r\n        this.beforDir = this.moveDir;\r\n        this.moveDir = GEnum.enemyMoveDir.stay;\r\n        Laya.timer.frameOnce(30, this, f => {\r\n            this.moveDir = this.beforDir;\r\n            if (this.moveDir === GEnum.enemyMoveDir.stay) {\r\n                if (this.stoneTime) {\r\n                    Math.floor(Math.random() * 2) === 1 ? this.moveDir = GEnum.enemyMoveDir.left : this.moveDir = GEnum.enemyMoveDir.right;\r\n                }\r\n                else {\r\n                    this.moveDir = GEnum.enemyMoveDir.down;\r\n                }\r\n            }\r\n        });\r\n    }\r\n    enemyAndStone(other, self) {\r\n        this.stoneTime = true;\r\n        Math.floor(Math.random() * 2) === 1 ? this.moveDir = GEnum.enemyMoveDir.left : this.moveDir = GEnum.enemyMoveDir.right;\r\n    }\r\n    onTriggerExit(other, self) {\r\n        switch (other.label) {\r\n            case 'bullet':\r\n                break;\r\n            case 'stone':\r\n                this.stoneTime = false;\r\n                this.moveDir = GEnum.enemyMoveDir.down;\r\n                break;\r\n            case 'enemy':\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n    moveRules() {\r\n        if (this.moveDir === GEnum.enemyMoveDir.left) {\r\n            if (this.stoneTime) {\r\n                this.self.x--;\r\n            }\r\n            else {\r\n                this.moveDir = GEnum.enemyMoveDir.down;\r\n            }\r\n        }\r\n        else if (this.moveDir === GEnum.enemyMoveDir.right) {\r\n            if (this.stoneTime) {\r\n                this.self.x++;\r\n            }\r\n            else {\r\n                this.moveDir = GEnum.enemyMoveDir.down;\r\n            }\r\n        }\r\n        else if (this.moveDir === GEnum.enemyMoveDir.down) {\r\n            this.self.y++;\r\n        }\r\n        else if (this.moveDir === GEnum.enemyMoveDir.up) {\r\n            this.self.y++;\r\n        }\r\n    }\r\n    lwgOnUpdate() {\r\n        if (!Admin._gameStart) {\r\n            return;\r\n        }\r\n        this.moveRules();\r\n        if (this.self.y >= this.selfScene['Blood'].y) {\r\n            this.self.removeSelf();\r\n            this.selfScene[lwg.Admin.SceneName.UIMain].addBlood(-1);\r\n        }\r\n    }\r\n}\r\n",
  "references": [
    "F:/Work/Game/05_DefensiveShooting_2.3.0/project/DefensiveShooting-2.3.0/src/script/Lwg_Template/lwg.ts",
    "F:/Work/Game/05_DefensiveShooting_2.3.0/project/DefensiveShooting-2.3.0/src/script/Lwg_Template/Global.ts"
  ]
}
