{
  "code": "import { lwg } from \"../Lwg_Template/lwg\";\r\nimport { GEnum } from \"../Lwg_Template/Global\";\r\nexport default class UIMain_Bullet extends lwg.Admin.Object {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.targetEnemy = new Laya.Sprite();\r\n        this.reboundRotae = 0;\r\n        this.accelerated = 0;\r\n        this.speed = 80;\r\n    }\r\n    lwgOnEnable() {\r\n        this.bulletState = GEnum.BulletState.attack;\r\n    }\r\n    onTriggerEnter(other, self) {\r\n        switch (other.label) {\r\n            case 'enemy':\r\n                this.bulletAndEnemy(other, self);\r\n                break;\r\n            case 'stone':\r\n                this.bulletAndStone(other, self);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n    bulletAndEnemy(other, self) {\r\n        let otherOwner = other.owner;\r\n        let num = otherOwner.getChildByName('Num');\r\n        if (otherOwner['UIMain_Enemy'].enemyType === this.bulletType) {\r\n            if (this.bulletState === GEnum.BulletState.attack) {\r\n                num.text = (Number(num.text) - 2).toString();\r\n                if (Number(num.text) <= 0) {\r\n                    otherOwner.removeSelf();\r\n                }\r\n                this.self.removeSelf();\r\n            }\r\n        }\r\n        else {\r\n            this.bulletState = GEnum.BulletState.rebound;\r\n            this.accelerated = 0;\r\n            this.reboundRotae = Math.floor(Math.random() * 2) === 1 ? Math.random() * this.speed / 3 + 10 : -Math.random() * this.speed / 3 + 10;\r\n        }\r\n    }\r\n    bulletAndStone(other, self) {\r\n        this.bulletState = GEnum.BulletState.rebound;\r\n        this.accelerated = 0;\r\n        this.reboundRotae = Math.floor(Math.random() * 2) === 1 ? Math.random() * this.speed / 3 + 10 : -Math.random() * this.speed / 3 + 10;\r\n    }\r\n    lwgOnUpdate() {\r\n        if (this.bulletState === GEnum.BulletState.attack) {\r\n            for (let index = 0; index < this.selfScene['EnemyParent'].numChildren; index++) {\r\n                const element = this.selfScene['EnemyParent'].getChildAt(index);\r\n                if (element) {\r\n                    let len = lwg.Tools.twoObjectsLen_2D(this.self, element);\r\n                    if (len < 50) {\r\n                        this.self.removeSelf();\r\n                        element.removeSelf();\r\n                        return;\r\n                    }\r\n                }\r\n            }\r\n            if (this.accelerated >= this.speed) {\r\n                this.accelerated = 0;\r\n                return;\r\n            }\r\n            else {\r\n                this.accelerated -= 2;\r\n            }\r\n            this.self.x -= (this.speed + this.accelerated) * this.movePoint.x;\r\n            this.self.y -= (this.speed + this.accelerated) * this.movePoint.y;\r\n            if (this.self.y < -100 || this.self.y > Laya.stage.height || this.self.x > Laya.stage.width || this.self.x < 0) {\r\n                this.self.removeSelf();\r\n            }\r\n        }\r\n        else if (this.bulletState === GEnum.BulletState.rebound) {\r\n            if (this.speed / 2 + this.accelerated <= 0) {\r\n                this.self.alpha -= 0.05;\r\n                if (this.self.alpha <= 0) {\r\n                    this.self.removeSelf();\r\n                }\r\n            }\r\n            else {\r\n                this.self.rotation += this.reboundRotae;\r\n                this.accelerated -= 2;\r\n                this.self.x += (this.speed / 2 + this.accelerated) * this.movePoint.x;\r\n                this.self.y += (this.speed / 2 + this.accelerated) * this.movePoint.y;\r\n            }\r\n        }\r\n    }\r\n}\r\n",
  "references": [
    "F:/Work/Game/05_DefensiveShooting_2.3.0/project/DefensiveShooting-2.3.0/src/script/Lwg_Template/lwg.ts",
    "F:/Work/Game/05_DefensiveShooting_2.3.0/project/DefensiveShooting-2.3.0/src/script/Lwg_Template/Global.ts"
  ]
}
